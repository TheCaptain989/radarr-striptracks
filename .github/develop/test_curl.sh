#!/bin/bash
# shellcheck disable=SC2034,SC2181,SC2154

striptracks_debug=2
source /workspaces/radarr-striptracks/root/usr/local/bin/striptracks.sh

striptracks_pid=$$
log() {( while read -r; do echo "$(date +"%Y-%m-%d %H:%M:%S.%1N")|[$striptracks_pid]$REPLY"; done; )}

striptracks_type="test_curl"
striptracks_apikey="NOT_A_REAL_API_KEY"
striptracks_api_url="https://dummyjson.com/"
striptracks_videomonitored=true
striptracks_videoinfo='{"seriesId":8,"tvdbId":8512086,"episodeFileId":19641,"seasonNumber":1,"episodeNumber":1,"title":"DOG & CHAINSAW","airDate":"2022-10-12","airDateUtc":"2022-10-11T15:00:00Z","lastSearchTime":"2026-02-14T12:02:16Z","runtime":25,"overview":"Denji is a teenager who lives his life as a Devil Hunter. Aiming to pay off the debt he inherited from his father, he starts hunting devils for the yakuza with his buddy Pochita, a \"Chainsaw Devil\", while living a tragically poor life. Just when things seem like they couldn'\''t get any worse, Denji gets betrayed and killed by the yakuza. As Denji starts passing out, he hears someone calling from inside his head...","episodeFile":{"seriesId":8,"seasonNumber":1,"relativePath":"Season 01/Chainsaw Man (2022) - S01E01 - 001 - DOG and CHAINSAW [German DL][Bluray-1080p][DTS-HD MA 2.0][DE+JA][x265 10bit]-ABJ.mkv","path":"/mnt/shared/media/anime/Chainsaw Man (2022) [tvdbid-397934]/Season 01/Chainsaw Man (2022) - S01E01 - 001 - DOG and CHAINSAW [German DL][Bluray-1080p][DTS-HD MA 2.0][DE+JA][x265 10bit]-ABJ.mkv","size":1785152665,"dateAdded":"2026-02-14T12:04:09Z","releaseGroup":"ABJ","languages":[{"id":8,"name":"Japanese"},{"id":4,"name":"German"}],"quality":{"quality":{"id":7,"name":"Bluray-1080p","source":"bluray","resolution":1080},"revision":{"version":1,"real":0,"isRepack":false}},"customFormats":[{"id":139,"name":"1080p"},{"id":190,"name":"10bit"},{"id":137,"name":"German 1080p Booster"},{"id":128,"name":"German Anime Bluray Tier 02"},{"id":133,"name":"German DL"}],"customFormatScore":14350,"indexerFlags":0,"releaseType":"singleEpisode","mediaInfo":{"audioBitrate":0,"audioChannels":2,"audioCodec":"DTS-HD MA","audioLanguages":"jpn/ger","audioStreamCount":2,"videoBitDepth":10,"videoBitrate":0,"videoCodec":"h265","videoFps":23.976,"videoDynamicRange":"","videoDynamicRangeType":"","resolution":"1920x1080","runTime":"25:25","scanType":"Progressive","subtitles":"ger/ger"},"qualityCutoffNotMet":false,"id":19641},"hasFile":true,"monitored":false,"absoluteEpisodeNumber":1,"unverifiedSceneNumbering":false,"series":{"title":"Chainsaw Man","sortTitle":"chainsaw man","status":"ended","ended":true,"overview":"Following a betrayal, a young man left for the dead is reborn as a powerful devil-human hybrid after merging with his pet devil and is soon enlisted into an organization dedicated to hunting devils.","network":"TV Tokyo","airTime":"00:00","images":[{"coverType":"banner","remoteUrl":"https://artworks.thetvdb.com/banners/v4/series/397934/banners/6630dfa784dde.jpg"},{"coverType":"poster","remoteUrl":"https://artworks.thetvdb.com/banners/v4/series/397934/posters/6345afeb2f65d.jpg"},{"coverType":"fanart","remoteUrl":"https://artworks.thetvdb.com/banners/v4/series/397934/backgrounds/62f7545a78181.jpg"},{"coverType":"clearlogo","remoteUrl":"https://artworks.thetvdb.com/banners/v4/series/397934/clearlogo/6346d92034848.png"}],"originalLanguage":{"id":8,"name":"Japanese"},"seasons":[{"seasonNumber":0,"monitored":false},{"seasonNumber":1,"monitored":true}],"year":2022,"path":"/mnt/shared/media/anime/Chainsaw Man (2022) [tvdbid-397934]","qualityProfileId":8,"seasonFolder":true,"monitored":true,"monitorNewItems":"all","useSceneNumbering":false,"runtime":24,"tvdbId":397934,"tvRageId":0,"tvMazeId":63451,"tmdbId":114410,"firstAired":"2022-10-12T00:00:00Z","lastAired":"2022-12-28T00:00:00Z","seriesType":"anime","cleanTitle":"chainsawman","imdbId":"tt13616990","titleSlug":"chainsaw-man","certification":"TV-MA","genres":["Action","Adventure","Animation","Anime","Comedy","Fantasy","Horror","Thriller"],"tags":[],"added":"2022-10-22T22:12:37Z","ratings":{"votes":94361,"value":8.3},"languageProfileId":1,"id":8},"images":[{"coverType":"screenshot","remoteUrl":"https://artworks.thetvdb.com/banners/v4/episode/8512086/screencap/633d41c497bb9.jpg"}],"id":432}'

call_api 0 "test_curl" "PUT" "todos/2" "$(echo $striptracks_videoinfo | jq -crM .monitored="$striptracks_videomonitored")"
